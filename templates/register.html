{% extends "layout.html" %} {% block title%} Register {% endblock %} {% block
main %}
<div class="login-box box">
  <form
    action="/register"
    method="post"
    onsubmit="document.getElementById('loader').style.display='block';"
  >
    <div class="form-group">
      <p class="h3 mb-4">Register</p>
      {% if user_exists %}
      <div class="col-12 d-flex justify-content-center">
        <div class="alert">
          Username is taken.
        </div>
      </div>
      {% endif %}
      <label for="username" id="doer-text">Enter a username: </label>
      <input
        class="form-control"
        type="text"
        id="username"
        name="username"
        placeholder="Username"
      />
    </div>
    <div class="form-group">
      <label for="security" id="doer-text">Security: Enter a secure key:</label>
      <input
        class="form-control"
        type="security"
        id="security"
        name="security"
        placeholder="Keyword"
      />
    </div>
    <div class="form-group">
      <label for="password" id="doer-text">Enter a password: </label>
      <input
        class="form-control"
        type="password"
        id="password"
        name="password"
        placeholder="Password"
      />
    </div>
    <div class="form-group">
      <label for="password" id="doer-text">Retype the password: </label>
      <input
        class="form-control"
        type="password"
        id="password2"
        name="pasword2"
        placeholder="Password"
      />
      <small id="dont-match" class="form-text text-muted" style="display: none">
        Passwords dont match.
      </small>
    </div>
    <div class="form-group">
      <button id="submit" type="submit" class="btn click-btn" disabled>
        Submit
      </button>
    </div>
  </form>
  <div id="loader" class="loader-contain">
    <div class="loader">
      <div class="center loader">
        <div class="loader-line a-loop"></div>
      </div>
    </div>
  </div>
</div>
<script>
  function checkField() {
    setInterval(function () {
      if (
        username.value == "" ||
        password.value == "" ||
        password2.value == "" ||
        security.value == ""
      ) {
        document.querySelector("#submit").disabled = true;
      } else {
        if (password.value == password2.value) {
          document.querySelector("#submit").disabled = false;
          document.getElementById("dont-match").style.display = "none";
        } else {
          document.querySelector("#submit").disabled = true;
          document.getElementById("dont-match").style.display = "block";
        }
      }
    }, 100);
  }
  checkField();
</script>
<style>
  #doer-text {
    display: block;
    text-align: left;
  }
</style>
{% endblock %}
